(this["webpackJsonpcamera-test"]=this["webpackJsonpcamera-test"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(33)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/nikaragua2.543678af.jpg"},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(12),s=n.n(o),h=(n(20),n(3)),r=n(4),c=n(6),l=n(5),u=n(2),d=n(7),v=n(13),w=n.n(v),g=(n(21),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).videoConstraints={facingMode:"environment",width:{ideal:1280}},n.webcamReference=a.a.createRef(),n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"getScreenshot",value:function(){return this.webcamReference.current.getScreenshot()}},{key:"render",value:function(){return a.a.createElement(w.a,{ref:this.webcamReference,className:"webcam-image-camera",screenshotFormat:"image/jpeg",minScreenshotWidth:1280,audio:!1,videoConstraints:this.videoConstraints})}}]),t}(a.a.PureComponent)),m={windowFocused:!1,mouseX:null,mouseY:null,initialize:function(){this.windowFocusCallbackHandler=this.windowFocusCallback.bind(this),window.addEventListener("focus",this.windowFocusCallbackHandler),this.windowBlurCallbackHandler=this.windowBlurCallback.bind(this),window.addEventListener("blur",this.windowBlurCallbackHandler),this.windowMouseMoveCallbackHandler=this.windowMouseMoveCallback.bind(this),window.addEventListener("mousemove",this.windowMouseMoveCallbackHandler)},dispose:function(e){window.removeEventListener("focus",this.windowFocusCallbackHandler),window.removeEventListener("blur",this.windowBlurCallbackHandler),window.removeEventListener("mousemove",this.windowMouseMoveCallbackHandler)},windowBlurCallback:function(){this.windowFocused=!1},windowFocusCallback:function(){this.windowFocused=!0},windowMouseMoveCallback:function(e){this.mouseX=e.pageX,this.mouseY=e.pageY},getMouseX:function(){return this.mouseX},getMouseY:function(){return this.mouseY},isWindowFocused:function(){return this.windowFocused}},f=(n(22),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).x=0,n.y=0,n.width=0,n.height=0,n.angle=0,n.invertMode=!1,n.imageElement=null,n.lineWidth=5,n.strokeStyle="#ff0000",n.shadowColor="#ff0000",n.mousedown=!1,n.modifiedImage=!1,n.canvasElementReference=a.a.createRef(),n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.reloadImage()}},{key:"componentDidUpdate",value:function(e){e.src!==this.props&&this.reloadImage()}},{key:"reloadImage",value:function(){var e=this,t=new Image;t.src=this.props.src,this.imageElement=t,t.onload=function(){e.canvasElementReference.current.width=e.props.boundWidth,console.log("TCL: ImageCanvas -> image.onload -> this.props.boundWidth",e.props.boundWidth),e.canvasElementReference.current.height=e.props.boundHeight,console.log("TCL: ImageCanvas -> image.onload -> this.props.boundHeight",e.props.boundHeight),e.width=t.width,e.height=t.height,console.log(t.width,t.height),e.modifiedImage=!1,e.canvasContext=e.canvasElementReference.current.getContext("2d"),e.canvasContext.imageSmoothingEnabled=!1,e.props.onRender&&e.props.onRender()}}},{key:"setX",value:function(e){this.x=e}},{key:"setY",value:function(e){this.y=e}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"setWidth",value:function(e){this.width=e}},{key:"setHeight",value:function(e){this.height=e}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"center",value:function(){this.centerX(),this.centerY()}},{key:"centerX",value:function(){var e=(this.props.boundWidth-this.getWidth())/2;this.setX(e)}},{key:"centerY",value:function(){var e=(this.props.boundHeight-this.getHeight())/2;this.setY(e)}},{key:"scale",value:function(e){var t=this.getWidth(),n=this.getHeight();this.setWidth(t*e),this.setHeight(n*e)}},{key:"setXWithBounds",value:function(e){e=Math.min(e,0),e=Math.max(e,this.props.boundWidth-this.getWidth()),this.setX(e)}},{key:"setYWithBounds",value:function(e){e=Math.min(e,0),e=Math.max(e,this.props.boundHeight-this.getHeight()),this.setY(e)}},{key:"redraw",value:function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.canvasContext.save();var e=this.angle*Math.PI/180,t=(this.angle+90)*Math.PI/180,n=Math.abs(Math.cos(e)*this.width)+Math.abs(Math.sin(e)*this.height),i=Math.abs(Math.cos(e)*this.height)+Math.abs(Math.sin(e)*this.width),a=Math.cos(e)*this.x+Math.sin(e)*this.y,o=Math.cos(t)*this.x+Math.sin(t)*this.y,s=0,h=0;0===this.angle&&(s=a,h=o),90===this.angle&&(s=a,h=o-i),180===this.angle&&(s=a-n,h=o-i),270===this.angle&&(s=a-n,h=o),this.canvasContext.rotate(this.angle*Math.PI/180),this.canvasContext.translate(s,h);var r=window.devicePixelRatio;console.log("TCL: ImageCanvas -> redraw -> dpi",r);var c=+getComputedStyle(this.canvasContext.canvas).getPropertyValue("width").slice(0,-2);console.log("TCL: ImageCanvas -> redraw -> this.canvasContext",this.canvasContext);var l=+getComputedStyle(this.canvasContext.canvas).getPropertyValue("height").slice(0,-2);console.log("TCL: ImageCanvas -> redraw -> style_height style_width",l,c),this.canvasContext.drawImage(this.imageElement,0,0,this.imageElement.width,this.imageElement.height,0,0,n,i),!0===this.invertMode&&(this.canvasContext.globalCompositeOperation="difference",this.canvasContext.fillStyle="white",this.canvasContext.fillRect(0,0,n,i)),this.canvasContext.restore()}},{key:"fitToBounds",value:function(){var e=this.props.padding||0,t=(this.props.boundWidth-e)/this.imageElement.width,n=(this.props.boundHeight-e)/this.imageElement.height,i=Math.min(1,t,n);this.scale(i)}},{key:"isZoomOutAvailable",value:function(){return this.getWidth()>this.props.boundWidth||this.getHeight()>this.props.boundHeight}},{key:"rotate",value:function(e){this.angle+=e,this.angle>270&&(this.angle=0),this.angle<0&&(this.angle=270);var t=this.width,n=this.height;this.width=n,this.height=t,this.center()}},{key:"rotateRight",value:function(){this.rotate(90)}},{key:"rotateLeft",value:function(){this.rotate(-90)}},{key:"zoom",value:function(e,t){if(e<1&&!1===this.isZoomOutAvailable())return!1;this.scale(e);var n=e-1;if(this.getWidth()>this.props.boundWidth&&!0===t){var i=this.getX(),a=i-(m.getMouseX()-i)*n;this.setXWithBounds(a)}else this.centerX();if(this.getHeight()>this.props.boundHeight&&!0===t){var o=this.getY(),s=o-(m.getMouseY()-o)*n;this.setYWithBounds(s)}else this.centerY()}},{key:"toggleInvertMode",value:function(){this.invertMode=!this.invertMode}},{key:"handleDrawingStart",value:function(e){var t=this.getMosuePositionOnCanvas(e);this.canvasContext.beginPath(),this.canvasContext.moveTo(t.x,t.y),this.canvasContext.save(),this.canvasContext.lineWidth=this.lineWidth,this.canvasContext.strokeStyle=this.strokeStyle,this.canvasContext.shadowColor=null,this.canvasContext.shadowBlur=null,this.canvasContext.fill(),this.mousedown=!0}},{key:"handleDrawingInProgress",value:function(e){if(this.mousedown){var t=this.getMosuePositionOnCanvas(e);this.canvasContext.lineTo(t.x,t.y),this.canvasContext.stroke()}}},{key:"handleDrawingEnd",value:function(){this.mousedown&&(this.canvasContext.shadowColor=this.shadowColor,this.canvasContext.shadowBlur=this.lineWidth/4,this.canvasContext.stroke()),this.modifiedImage=!0,this.mousedown=!1}},{key:"getMosuePositionOnCanvas",value:function(e){var t=e.clientX||e.touches[0].clientX,n=e.clientY||e.touches[0].clientY,i=e.target;return{x:t-i.offsetLeft,y:n-i.offsetTop}}},{key:"getModifiedImage",value:function(){if(!0===this.modifiedImage)return this.canvasElementReference.current.toDataURL("image/jpeg",.1)}},{key:"render",value:function(){return a.a.createElement("canvas",{draggable:"false",className:"image-canvas",ref:this.canvasElementReference})}}]),t}(a.a.PureComponent)),C=(n(23),function(e){function t(e){var i;return Object(h.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={windowHeight:window.innerHeight,windowWidth:window.innerWidth,image:n(24)},console.log("TCL: TicketPhotoPreview -> constructor -> this.props.image",i.props.image),i.imageCanvasRenderCallback=i.imageCanvasRenderCallback.bind(Object(u.a)(i)),i.imageCanvasReference=a.a.createRef(),i}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.windowTouchStartCallback=this.windowTouchStartCallback.bind(this),window.addEventListener("touchstart",this.windowTouchStartCallback),this.windowTouchMoveCallback=this.windowTouchMoveCallback.bind(this),window.addEventListener("touchmove",this.windowTouchMoveCallback),this.windowTouchEndCallback=this.windowTouchEndCallback.bind(this),window.addEventListener("touchend",this.windowTouchEndCallback),this.orientationChangedCallback=this.orientationChangedCallback.bind(this),window.addEventListener("resize",this.orientationChangedCallback)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("touchstart",this.windowTouchStartCallback),window.removeEventListener("touchmove",this.windowTouchMoveCallback),window.removeEventListener("touchend",this.windowTouchEndCallback),window.removeEventListener("resize",this.orientationChangedCallback)}},{key:"orientationChangedCallback",value:function(){this.setState({windowHeight:window.innerHeight,windowWidth:window.innerWidth})}},{key:"imageCanvasRenderCallback",value:function(){this.imageCanvasReference.current.fitToBounds(),this.imageCanvasReference.current.center(),this.imageCanvasReference.current.redraw()}},{key:"windowTouchStartCallback",value:function(e){if(!0!==this.props.paintMode)return!1;this.imageCanvasReference.current.handleDrawingStart(e)}},{key:"windowTouchMoveCallback",value:function(e){if(!0!==this.props.paintMode)return!1;this.imageCanvasReference.current.handleDrawingInProgress(e)}},{key:"windowTouchEndCallback",value:function(e){if(!0!==this.props.paintMode)return!1;this.imageCanvasReference.current.handleDrawingEnd(),this.props.modifiedImage(this.imageCanvasReference.current.getModifiedImage())}},{key:"render",value:function(){return a.a.createElement("div",{className:"ticket-photo-preview-image-canvas-container"},a.a.createElement(f,{ref:this.imageCanvasReference,src:this.props.image,boundWidth:this.state.windowWidth,boundHeight:this.state.windowHeight,onRender:this.imageCanvasRenderCallback}))}}]),t}(a.a.PureComponent)),b=n(14),p=(n(30),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).buttonClickCallbackHandler=function(e){return n.buttonClickCallback(e)},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"buttonClickCallback",value:function(e){this.props.onClick&&this.props.onClick(e,this.props.index)}},{key:"render",value:function(){return a.a.createElement("button",{className:"icon-button "+(this.props.additionalClass?this.props.additionalClass:""),onClick:this.buttonClickCallbackHandler},a.a.createElement(b.a,{icon:this.props.iconKey,size:this.props.size?this.props.size:"1x"}))}}]),t}(a.a.PureComponent)),k=(n(31),a.a.PureComponent,n(32),n(8)),y=n(9);k.b.add(y.b,y.c,y.a);var M=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("button",null,"HELLO!"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[15,1,2]]]);
//# sourceMappingURL=main.00c025d6.chunk.js.map