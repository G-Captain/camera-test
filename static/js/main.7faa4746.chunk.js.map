{"version":3,"sources":["components/TicketPhotoPreview/mapucze.jpg","components/ImageCanvas/WindowService.js","components/WebcamImage/WebcamImage.js","components/ImageCanvas/ImageCanvas.js","components/TicketPhotoPreview/TicketPhotoPreview.js","components/IconButton/IconButton.js","components/TicketPhotoPicker/TicketPhotoPicker.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","React","PureComponent","windowFocused","mouseX","mouseY","initialize","this","windowFocusCallbackHandler","windowFocusCallback","bind","window","addEventListener","windowBlurCallbackHandler","windowBlurCallback","windowMouseMoveCallbackHandler","windowMouseMoveCallback","dispose","translation","removeEventListener","event","pageX","pageY","getMouseX","getMouseY","isWindowFocused","ImageCanvas","props","state","info","x","y","width","height","angle","invertMode","imageElement","lineWidth","strokeStyle","shadowColor","mousedown","modifiedImage","canvasElementReference","createRef","reloadImage","prevProps","src","image","Image","onload","dpi","devicePixelRatio","current","boundWidth","console","log","boundHeight","setState","canvasContext","getContext","onRender","centerX","centerY","newX","getWidth","setX","newY","getHeight","setY","ratio","currentWidth","currentHeight","setWidth","setHeight","Math","min","max","clearRect","canvas","save","radianAngle","PI","nextRadianAngle","relativeWidth","abs","cos","sin","relativeHeight","relativeX","relativeY","translateX","translateY","rotate","translate","style_width","getComputedStyle","getPropertyValue","slice","style_height","drawImage","globalCompositeOperation","fillStyle","fillRect","backingStorePixelRatio","restore","padding","widthRatio","heightRatio","scaleRatio","scale","rotateStep","center","factor","mouseFocus","isZoomOutAvailable","relativeFactor","currentX","getX","WindowService","setXWithBounds","currentY","getY","setYWithBounds","mousePos","getMosuePositionOnCanvas","beginPath","moveTo","shadowBlur","fill","lineTo","stroke","clientX","touches","clientY","target","offsetLeft","offsetTop","toDataURL","draggable","className","ref","TicketPhotoPreview","windowHeight","innerHeight","windowWidth","innerWidth","require","imageCanvasRenderCallback","imageCanvasReference","windowTouchStartCallback","windowTouchMoveCallback","windowTouchEndCallback","orientationChangedCallback","fitToBounds","redraw","setInfo","paintMode","handleDrawingStart","handleDrawingInProgress","handleDrawingEnd","getModifiedImage","IconButton","buttonClickCallbackHandler","buttonClickCallback","onClick","index","additionalClass","icon","iconKey","size","TicketPhotoPicker","isLoading","isProcessing","isPaintModeEnabled","ticketAttachmentTypes","selectedTicketAttachmentType","cancelButtonClickCallback","captureButtonClickCallback","sendButtonClickCallback","togglePaintModeButtonClickCallback","dismissButtonClickCallback","ticketPhotoPreviewGetModifiedImageCallback","ticketPhotoTypeDialogTriggerSelectCallback","infoCallback","webcamImageReference","loadTicketAttachmentTypes","createTicketCarImageCancelable","cancel","getImageTicketAttachmentTypesCancelable","ticketAttachmentType","localStorage","setItem","id","valueKey","onCancel","getScreenshot","library","add","faCamera","faTimes","faArrowLeft","App","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","document","getElementById","URL","process","href","origin","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.7faa4746.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/mapucze.620d59e7.jpg\";","\r\nexport default {\r\n\r\n\twindowFocused: false,\r\n\r\n\tmouseX: null,\r\n\r\n\tmouseY: null,\r\n\r\n\tinitialize() {\r\n\t\tthis.windowFocusCallbackHandler = this.windowFocusCallback.bind(this);\r\n\t\twindow.addEventListener(\"focus\", this.windowFocusCallbackHandler);\r\n\r\n\t\tthis.windowBlurCallbackHandler = this.windowBlurCallback.bind(this);\r\n\t\twindow.addEventListener(\"blur\", this.windowBlurCallbackHandler);\r\n\r\n\t\tthis.windowMouseMoveCallbackHandler = this.windowMouseMoveCallback.bind(this);\r\n\t\twindow.addEventListener(\"mousemove\", this.windowMouseMoveCallbackHandler);\r\n\t},\r\n\r\n\tdispose(translation) {\r\n\t\twindow.removeEventListener(\"focus\", this.windowFocusCallbackHandler);\r\n\t\twindow.removeEventListener(\"blur\", this.windowBlurCallbackHandler);\r\n\t\twindow.removeEventListener(\"mousemove\", this.windowMouseMoveCallbackHandler);\r\n\t},\r\n\r\n    windowBlurCallback() {\r\n    \tthis.windowFocused = false;\r\n    },\r\n\r\n    windowFocusCallback() {\r\n\t\tthis.windowFocused = true;\r\n    },\r\n\r\n    windowMouseMoveCallback(event) {\r\n    \tthis.mouseX = event.pageX;\r\n    \tthis.mouseY = event.pageY;\r\n\t},\r\n\r\n\tgetMouseX() {\r\n\t\treturn this.mouseX;\r\n\t},\r\n\r\n\tgetMouseY() {\r\n\t\treturn this.mouseY;\r\n\t},\r\n\r\n\tisWindowFocused() {\r\n\t\treturn this.windowFocused;\r\n\t}\r\n};\r\n","import React from 'react';\r\nimport Webcam from 'react-webcam';\r\n\r\nimport './WebcamImage.css';\r\n\r\nexport default class WebcamImage extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.videoConstraints = {\r\n\t\t\tfacingMode: 'environment',\r\n        \twidth: {\r\n        \t\tideal: 1280\r\n        \t}\r\n\t\t};\r\n\t\tthis.webcamReference = React.createRef();\r\n\t}\r\n\r\n\tgetScreenshot() {\r\n\t\treturn this.webcamReference.current.getScreenshot();\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<Webcam\r\n\t\t\t\tref={this.webcamReference}\r\n\t\t\t\tclassName='webcam-image-camera'\r\n\t\t\t\tscreenshotFormat='image/jpeg'\r\n\t\t\t\tminScreenshotWidth={1280}\r\n\t\t\t\taudio={false}\r\n\t\t\t\tvideoConstraints={this.videoConstraints}>\r\n\t\t\t</Webcam>\r\n\t\t)\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport WindowService from './WindowService.js';\r\n\r\nimport './ImageCanvas.css';\r\n\r\nexport default class ImageCanvas extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tinfo: ''\r\n\t\t}\r\n\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\r\n\t\tthis.width = 0;\r\n\t\tthis.height = 0;\r\n\r\n\t\tthis.angle = 0;\r\n\r\n\t\tthis.invertMode = false;\r\n\r\n\t\tthis.imageElement = null;\r\n\r\n\t\tthis.lineWidth = 5;\r\n\t\tthis.strokeStyle = '#ff0000';\r\n\t\tthis.shadowColor =  '#ff0000';\r\n\t\tthis.mousedown = false;\r\n\r\n\t\tthis.modifiedImage = false;\r\n\r\n\t\tthis.canvasElementReference = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.reloadImage();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif(prevProps.src !== this.props) {\r\n\t\t\tthis.reloadImage();\r\n\t\t}\r\n\t}\r\n\r\n\treloadImage() {\r\n\t\tconst image = new Image();\r\n\t\timage.src = this.props.src;\r\n\t\tthis.imageElement = image;\r\n\r\n\t\timage.onload = () => {\r\n\t\t\t\r\n\t\tconst dpi = window.devicePixelRatio;\r\n\t\t\tthis.canvasElementReference.current.width = dpi *this.props.boundWidth;\r\n            console.log(\"TCL: ImageCanvas -> image.onload -> this.props.boundWidth\", this.props.boundWidth);\r\n\t\t\tthis.canvasElementReference.current.height = dpi *this.props.boundHeight;\r\n            console.log(\"TCL: ImageCanvas -> image.onload -> this.props.boundHeight\", this.props.boundHeight);\r\n\r\n\t\t\tthis.width = image.width;\r\n\t\t\tthis.height = image.height;\r\n\r\n\t\t\tconsole.log(image.width, image.height);\r\n\r\n\t\t\tthis.modifiedImage = false;\r\n\t\t\tthis.setState({\r\n\t\t\t\tinfo: image.width + ' ' + image.height\r\n\t\t\t})\r\n\t\t\tthis.canvasContext = this.canvasElementReference.current.getContext(\"2d\");\r\n\t\t\t// this.canvasContext.imageSmoothingEnabled = false;\r\n\t\t\t// this.canvasContext.imageSmoothingQuality = 'high';\r\n\t\t\tif(this.props.onRender) {\r\n\t\t\t\tthis.props.onRender(this.state.info);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tsetX(x) {\r\n\t\tthis.x = x;\r\n\t}\r\n\r\n\tsetY(y) {\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tgetX() {\r\n\t\treturn this.x;\r\n\t}\r\n\r\n\tgetY() {\r\n\t\treturn this.y;\r\n\t}\r\n\r\n\tsetWidth(width) {\r\n\t\tthis.width = width;\r\n\t}\r\n\r\n\tsetHeight(height) {\r\n\t\tthis.height = height;\r\n\t}\r\n\r\n\tgetWidth() {\r\n\t\treturn this.width;\r\n\t}\r\n\r\n\tgetHeight() {\r\n\t\treturn this.height;\r\n\t}\r\n\r\n\tcenter() {\r\n\t\tthis.centerX();\r\n\t\tthis.centerY();\r\n\t}\r\n\r\n\tcenterX() {\r\n\t\tconst newX = (this.props.boundWidth - this.getWidth()) / 2;\r\n\t\tthis.setX(newX);\r\n\t}\r\n\r\n\tcenterY() {\r\n\t\tconst newY = (this.props.boundHeight - this.getHeight()) / 2;\r\n\t\tthis.setY(newY);\r\n\t}\r\n\r\n\tscale(ratio) {\r\n\t\tconst currentWidth = this.getWidth();\r\n\t\tconst currentHeight = this.getHeight();\r\n\t\tthis.setWidth(currentWidth * ratio);\r\n\t\tthis.setHeight(currentHeight * ratio);\r\n\t}\r\n\r\n\tsetXWithBounds(x) {\r\n\t\tx = Math.min(x, 0);\r\n\t\tx = Math.max(x, this.props.boundWidth - this.getWidth());\r\n\t\tthis.setX(x);\r\n\t}\r\n\r\n\tsetYWithBounds(y) {\r\n\t\ty = Math.min(y, 0);\r\n\t\ty = Math.max(y, this.props.boundHeight - this.getHeight());\r\n\t\tthis.setY(y);\r\n\t}\r\n\r\n\tredraw() {\r\n\t\tthis.canvasContext.clearRect(0, 0, this.canvasContext.canvas.width, this.canvasContext.canvas.height);\r\n\t\tthis.canvasContext.save();\r\n\r\n\t\tconst dpi = window.devicePixelRatio;\r\n\t\tconst radianAngle = this.angle * Math.PI / 180;\r\n\t\tconst nextRadianAngle = (this.angle + 90) * Math.PI / 180;\r\n\r\n\t\tvar relativeWidth = Math.abs((Math.cos(radianAngle) * this.width)) + Math.abs((Math.sin(radianAngle) * this.height));\r\n\t\tvar relativeHeight = Math.abs((Math.cos(radianAngle) * this.height)) + Math.abs((Math.sin(radianAngle) * this.width));\r\n\r\n\t\tvar relativeX = Math.cos(radianAngle) * this.x + Math.sin(radianAngle) * this.y;\r\n\t\tvar relativeY = Math.cos(nextRadianAngle) * this.x + Math.sin(nextRadianAngle) * this.y;\r\n\r\n\t\tlet translateX = 0;\r\n\t\tlet translateY = 0;\r\n\r\n\t\tif(this.angle === 0) {\r\n\t\t\ttranslateX = relativeX;\r\n\t\t\ttranslateY = relativeY;\r\n\t\t}\r\n\t\tif(this.angle === 90) {\r\n\t\t\ttranslateX = relativeX;\r\n\t\t\ttranslateY = relativeY - relativeHeight;\r\n\t\t}\r\n\t\tif(this.angle === 180) {\r\n\t\t\ttranslateX = relativeX - relativeWidth;\r\n\t\t\ttranslateY = relativeY - relativeHeight;\r\n\t\t}\r\n\t\tif(this.angle === 270) {\r\n\t\t\ttranslateX = relativeX - relativeWidth;\r\n\t\t\ttranslateY = relativeY;\r\n\t\t}\r\n\r\n\t\tthis.canvasContext.rotate(this.angle * Math.PI / 180);\r\n\t\tthis.canvasContext.translate(translateX, translateY);\r\n        console.log(\"TCL: ImageCanvas -> redraw -> dpi\", dpi);\r\n\t\tconst style_width = +getComputedStyle(this.canvasContext.canvas).getPropertyValue(\"width\").slice(0, -2);\r\n        console.log(\"TCL: ImageCanvas -> redraw -> this.canvasContext\", this.canvasContext);\r\n\t\tconst style_height = +getComputedStyle(this.canvasContext.canvas).getPropertyValue(\"height\").slice(0, -2);\r\n\t\tconsole.log(\"TCL: ImageCanvas -> redraw -> style_height style_width\", style_height, style_width);\r\n\t\tconsole.log(window)\r\n\t\tthis.canvasContext.drawImage(this.imageElement, 0, 0, this.imageElement.width, this.imageElement.height, 0, 0, dpi*relativeWidth, dpi*relativeHeight);\r\n\t\t// this.canvasContext.scale(this.imageElement.width/window.innerWidth, this.imageElement.height/window.innerHeight)\r\n\t\t// this.ctx.imageSmoothingEnabled\r\n        // console.log(\"TCL: ImageCanvas -> redraw -> this.ctx.imageSmoothingEnabled\", this.ctx.imageSmoothingEnabled);\r\n\t\tif(this.invertMode === true) {\r\n\t\t\tthis.canvasContext.globalCompositeOperation = 'difference';\r\n\t\t\tthis.canvasContext.fillStyle = 'white';\r\n\t\t\tthis.canvasContext.fillRect(0, 0, relativeWidth, relativeHeight);\r\n\t\t}\r\n\t\t// this.canvasContext.backingStorePixelRatio;\r\n        console.log(\"TCL: ImageCanvas -> redraw -> this.canvasContext.backingStorePixelRatio\", this.canvasContext.backingStorePixelRatio);\r\n\t\t// this.canvasContext.setTransform(dpi, 0,0,dpi,0,0);\r\n\r\n\t\tthis.canvasContext.restore();\r\n\t}\r\n\r\n\tfitToBounds() {\r\n\t\tconst padding = this.props.padding || 0;\r\n\t\tconst widthRatio = (this.props.boundWidth - padding) / this.imageElement.width;\r\n\t\tconst heightRatio = (this.props.boundHeight - padding) / this.imageElement.height;\r\n\t\tconst scaleRatio = Math.min(1, widthRatio, heightRatio);\r\n\t\tthis.scale(scaleRatio);\r\n\t\t// this.canvasContext.scale(scaleRatio, scaleRatio);\r\n\t}\r\n\r\n\tisZoomOutAvailable() {\r\n\t\treturn this.getWidth() > this.props.boundWidth || this.getHeight() > this.props.boundHeight;\r\n\t}\r\n\r\n\trotate(rotateStep) {\r\n\t\tthis.angle += rotateStep;\r\n\r\n\t\tif(this.angle > 270) {\r\n\t\t\tthis.angle = 0;\r\n\t\t}\r\n\t\tif(this.angle < 0) {\r\n\t\t\tthis.angle = 270;\r\n\t\t}\r\n\r\n\t\tconst currentWidth = this.width;\r\n\t\tconst currentHeight = this.height;\r\n\r\n\t\tthis.width = currentHeight;\r\n\t\tthis.height = currentWidth;\r\n\r\n\t\tthis.center();\r\n\t}\r\n\r\n\trotateRight() {\r\n\t\tthis.rotate(90);\r\n\t}\r\n\r\n\trotateLeft() {\r\n\t\tthis.rotate(-90);\r\n\t}\r\n\r\n\tzoom(factor, mouseFocus) {\r\n\t\tif(factor < 1 && this.isZoomOutAvailable() === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.scale(factor);\r\n\r\n\t\tconst relativeFactor = factor - 1;\r\n\t\tif(this.getWidth() > this.props.boundWidth && mouseFocus === true) {\r\n\t\t\tconst currentX = this.getX();\r\n\t\t\tconst offsetX = (WindowService.getMouseX() - currentX) * relativeFactor;\r\n\t\t\tlet newX = currentX - offsetX;\r\n\t\t\tthis.setXWithBounds(newX);\r\n\t\t} else {\r\n\t\t\tthis.centerX();\r\n\t\t}\r\n\t\tif(this.getHeight() > this.props.boundHeight && mouseFocus === true) {\r\n\t\t\tconst currentY = this.getY();\r\n\t\t\tconst offsetY = (WindowService.getMouseY() - currentY) * relativeFactor;\r\n\t\t\tlet newY = currentY - offsetY;\r\n\t\t\tthis.setYWithBounds(newY);\r\n\t\t} else {\r\n\t\t\tthis.centerY();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleInvertMode() {\r\n\t\tthis.invertMode = !this.invertMode;\r\n\t}\r\n\r\n\r\n\thandleDrawingStart(event) {\r\n\t\tconst mousePos = this.getMosuePositionOnCanvas(event);\r\n\t\tthis.canvasContext.beginPath();\r\n\t\tthis.canvasContext.moveTo(mousePos.x, mousePos.y);\r\n\t\tthis.canvasContext.save();\r\n\t\tthis.canvasContext.lineWidth = this.lineWidth;\r\n\t\tthis.canvasContext.strokeStyle = this.strokeStyle;\r\n\t\tthis.canvasContext.shadowColor = null;\r\n\t\tthis.canvasContext.shadowBlur = null;\r\n\t\tthis.canvasContext.fill();\r\n\t\tthis.mousedown = true;\r\n\t}\r\n\r\n\thandleDrawingInProgress(event) {\r\n\t\tif (this.mousedown) {\r\n\t\t\tconst mousePos = this.getMosuePositionOnCanvas(event);\r\n\t\t\tthis.canvasContext.lineTo(mousePos.x, mousePos.y);\r\n\t\t\tthis.canvasContext.stroke();\r\n\t\t}\r\n\t}\r\n\r\n\thandleDrawingEnd() {\r\n\t\tif (this.mousedown) {\r\n\t\t\tthis.canvasContext.shadowColor = this.shadowColor;\r\n\t\t\tthis.canvasContext.shadowBlur = this.lineWidth/4;\r\n\t\t\tthis.canvasContext.stroke();\r\n\t\t}\r\n\r\n\t\tthis.modifiedImage = true;\r\n\t\tthis.mousedown = false;\r\n\t}\r\n\r\n\tgetMosuePositionOnCanvas(event) {\r\n\t\tconst clientX = event.clientX || event.touches[0].clientX;\r\n\t\tconst clientY = event.clientY || event.touches[0].clientY;\r\n\t\tconst { offsetLeft, offsetTop } = event.target;\r\n\t\tconst canvasX = clientX - offsetLeft;\r\n\t\tconst canvasY = clientY - offsetTop;\r\n\t\treturn { x: canvasX, y: canvasY };\r\n\t}\r\n\r\n\tgetModifiedImage() {\r\n\t\tif(this.modifiedImage === true) {\r\n\t\t\treturn this.canvasElementReference.current.toDataURL('image/jpeg', 0.92);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<canvas\r\n\t\t\t\tdraggable=\"false\"\r\n\t\t\t\tclassName='image-canvas'\r\n\t\t\t\tref={this.canvasElementReference}>\r\n\t\t\t</canvas>\r\n\t\t)\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport ImageCanvas from './../ImageCanvas/ImageCanvas';\r\n\r\nimport './TicketPhotoPreview.css';\r\n\r\nexport default class TicketPhotoPreview extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\twindowHeight : window.innerHeight,\r\n\t\t\twindowWidth: window.innerWidth,\r\n\t\t\timage: require('./mapucze.jpg')\r\n\t\t}\r\n\t\tconsole.log(\"TCL: TicketPhotoPreview -> constructor -> this.props.image\", this.props.image);\r\n\r\n\r\n\r\n\t\tthis.imageCanvasRenderCallback = this.imageCanvasRenderCallback.bind(this);\r\n\r\n\t\tthis.imageCanvasReference = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.windowTouchStartCallback = this.windowTouchStartCallback.bind(this)\r\n\t\twindow.addEventListener('touchstart', this.windowTouchStartCallback);\r\n\t\tthis.windowTouchMoveCallback = this.windowTouchMoveCallback.bind(this)\r\n\t\twindow.addEventListener('touchmove', this.windowTouchMoveCallback);\r\n\t\tthis.windowTouchEndCallback = this.windowTouchEndCallback.bind(this)\r\n\t\twindow.addEventListener('touchend', this.windowTouchEndCallback);\r\n\t\tthis.orientationChangedCallback = this.orientationChangedCallback.bind(this);\r\n\t\twindow.addEventListener(\"resize\", this.orientationChangedCallback);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener('touchstart', this.windowTouchStartCallback);\r\n\t\twindow.removeEventListener('touchmove', this.windowTouchMoveCallback);\r\n\t\twindow.removeEventListener('touchend', this.windowTouchEndCallback);\r\n\t\twindow.removeEventListener(\"resize\", this.orientationChangedCallback);\r\n\t}\r\n\r\n\torientationChangedCallback() {\r\n\t\tthis.setState({\r\n\t\t\twindowHeight: window.innerHeight,\r\n\t\t\twindowWidth: window.innerWidth\r\n\t\t})\r\n\t}\r\n\r\n\timageCanvasRenderCallback(info) {\r\n\t\tthis.imageCanvasReference.current.fitToBounds();\r\n\t\tthis.imageCanvasReference.current.center();\r\n\t\tthis.imageCanvasReference.current.redraw();\r\n\t\tthis.props.setInfo(info, this.state.windowWidth, this.state.windowHeight);\r\n\t}\r\n\r\n\twindowTouchStartCallback(event) {\r\n\t\tif(this.props.paintMode !== true) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.imageCanvasReference.current.handleDrawingStart(event);\r\n\t}\r\n\r\n\twindowTouchMoveCallback(event) {\r\n\t\tif(this.props.paintMode !== true) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.imageCanvasReference.current.handleDrawingInProgress(event);\r\n\t}\r\n\r\n\twindowTouchEndCallback(event) {\r\n\t\tif(this.props.paintMode !== true) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.imageCanvasReference.current.handleDrawingEnd();\r\n\t\tthis.props.modifiedImage(this.imageCanvasReference.current.getModifiedImage())\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn(\r\n\t\t\t<div className='ticket-photo-preview-image-canvas-container'>\r\n\t\t\t\t<ImageCanvas\r\n\t\t\t\t\tref={this.imageCanvasReference}\r\n\t\t\t\t\tsrc={this.state.image}\r\n\t\t\t\t\tboundWidth={this.state.windowWidth}\r\n\t\t\t\t\tboundHeight={this.state.windowHeight}\r\n\t\t\t\t\tonRender={this.imageCanvasRenderCallback}>\r\n\t\t\t\t</ImageCanvas>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nimport \"./IconButton.css\";\r\n\r\nexport default class IconButton extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.buttonClickCallbackHandler = (event) => this.buttonClickCallback(event);\r\n\t}\r\n\r\n\tbuttonClickCallback(event) {\r\n\t\tif(this.props.onClick) {\r\n\t\t\tthis.props.onClick(event, this.props.index)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t    return (\r\n\t\t\t<button\r\n\t\t\t\tclassName={\"icon-button \" + (this.props.additionalClass ? this.props.additionalClass : '')}\r\n\t\t\t\tonClick={this.buttonClickCallbackHandler}>\r\n\t\t\t\t<FontAwesomeIcon icon={this.props.iconKey} size={this.props.size ? this.props.size : \"1x\"}/>\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n}\r\n","import React, { Fragment } from 'react';\r\nimport WebcamImage from './../WebcamImage/WebcamImage.js';\r\nimport TicketPhotoPreview from './../TicketPhotoPreview/TicketPhotoPreview.js';\r\nimport IconButton from './../IconButton/IconButton.js';\r\n\r\nimport './TicketPhotoPicker.css';\r\n\r\n\r\nexport default class TicketPhotoPicker extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisLoading: false,\r\n\t\t\tisProcessing: false,\r\n\t\t\timage: null,\r\n\t\t\tisPaintModeEnabled: false,\r\n\t\t\tticketAttachmentTypes: [],\r\n\t\t\tselectedTicketAttachmentType: null,\r\n\t\t\tinfo: ''\r\n\t\t}\r\n\r\n\t\tthis.cancelButtonClickCallback = this.cancelButtonClickCallback.bind(this);\r\n\t\tthis.captureButtonClickCallback = this.captureButtonClickCallback.bind(this);\r\n\r\n\t\tthis.sendButtonClickCallback = this.sendButtonClickCallback.bind(this);\r\n\t\tthis.togglePaintModeButtonClickCallback = this.togglePaintModeButtonClickCallback.bind(this);\r\n\t\tthis.dismissButtonClickCallback = this.dismissButtonClickCallback.bind(this);\r\n\r\n\t\tthis.ticketPhotoPreviewGetModifiedImageCallback = this.ticketPhotoPreviewGetModifiedImageCallback.bind(this);\r\n\t\tthis.ticketPhotoTypeDialogTriggerSelectCallback = this.ticketPhotoTypeDialogTriggerSelectCallback.bind(this);\r\n\t\tthis.infoCallback = this.infoCallback.bind(this);\r\n\r\n\t\tthis.webcamImageReference = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.loadTicketAttachmentTypes();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif(this.createTicketCarImageCancelable) {\r\n\t\t\tthis.createTicketCarImageCancelable.cancel();\r\n\t\t}\r\n\t\tif(this.getImageTicketAttachmentTypesCancelable) {\r\n\t\t\tthis.getImageTicketAttachmentTypesCancelable.cancel();\r\n\t\t}\r\n\t}\r\n\r\n\tinfoCallback(info,x, y) {\r\n\t\tthis.setState({\r\n\t\t\tinfo: info + ' ' + x + ' ' + y\r\n\t\t});\r\n\t}\r\n\r\n\tloadTicketAttachmentTypes() {\r\n\t\t// this.getImageTicketAttachmentTypesCancelable.promise.then(ticketAttachmentTypes => {\r\n\r\n\t\t// \tconst savedTicketAttachmentTypeId = localStorage.getItem('ticketPhotoPickerTicketAttachmentTypeId');\r\n\r\n\t\t// \tlet selectedTicketAttachmentType = null;\r\n\t\t// \tif(savedTicketAttachmentTypeId) {\r\n\t\t// \t\tselectedTicketAttachmentType = ticketAttachmentTypes.find(ticketAttachmentType => ticketAttachmentType.id === parseInt(savedTicketAttachmentTypeId));\r\n\t\t// \t}\r\n\t\t// \tif(!selectedTicketAttachmentType) {\r\n\t\t// \t\tselectedTicketAttachmentType = ticketAttachmentTypes[0];\r\n\t\t// \t}\r\n\r\n\t\t// \tthis.setState({\r\n\t\t// \t\tisLoading: false,\r\n\t\t// \t\tticketAttachmentTypes: ticketAttachmentTypes,\r\n\t\t// \t\tselectedTicketAttachmentType: selectedTicketAttachmentType\r\n\t\t// \t});\r\n\t\t// }).catch(error => {\r\n\t\t// \tif(error.isCanceled) {\r\n\t\t// \t\treturn false;\r\n\t\t// \t}\r\n\t\t// });\r\n\t}\r\n\r\n\tticketPhotoTypeDialogTriggerSelectCallback(ticketAttachmentType) {\r\n\t\tthis.setState({\r\n\t\t\tselectedTicketAttachmentType: ticketAttachmentType\r\n\t\t});\r\n\t\tlocalStorage.setItem('ticketPhotoPickerTicketAttachmentTypeId', ticketAttachmentType.id);\r\n\t}\r\n\r\n\tticketPhotoPreviewGetModifiedImageCallback(modifiedImage) {\r\n\t\tthis.setState({\r\n\t\t\timage: modifiedImage\r\n\t\t});\r\n\t}\r\n\r\n\tcancelButtonClickCallback(valueKey) {\r\n\t\tthis.props.onCancel();\r\n\t}\r\n\r\n\tcaptureButtonClickCallback() {\r\n\t\tthis.setState({\r\n\t\t\timage: this.webcamImageReference.current.getScreenshot()\r\n\t\t});\r\n\t}\r\n\r\n\tdismissButtonClickCallback() {\r\n\t\tthis.setState({\r\n\t\t\timage: null\r\n\t\t});\r\n\t}\r\n\r\n\ttogglePaintModeButtonClickCallback() {\r\n\t\tthis.setState({\r\n\t\t\tisPaintModeEnabled: !this.state.isPaintModeEnabled\r\n\t\t});\r\n\t}\r\n\r\n\tsendButtonClickCallback() {\r\n\t\tthis.setState({\r\n\t\t\tisProcessing: true,\r\n\t\t\tisPaintModeEnabled: false\r\n\t\t})\r\n\r\n\t\t// const ticketAttachmentTypeId = this.state.selectedTicketAttachmentType.id;\r\n\t\t// this.createTicketCarImageCancelable = TicketService.createTicketCarImage(parseInt(this.props.ticketId), ticketAttachmentTypeId, this.state.image);\r\n\t\t// this.createTicketCarImageCancelable.promise.then(ticket => {\r\n\t\t// \tNotificationService.setSuccessNotification(t.createTicketCarImageSuccessNotification);\r\n\t\t// \tthis.setState({\r\n\t\t// \t\tisProcessing: false,\r\n\t\t// \t\timage: null\r\n\t\t// \t});\r\n\t\t// \treturn false;\r\n\t\t// }).catch(error => {\r\n\t\t// \tif(error.isCanceled) {\r\n\t\t// \t\treturn false;\r\n\t\t// \t}\r\n\t\t// \tNotificationService.setErrorNotification(t.internalErrorNotification, error);\r\n\t\t// \tthis.setState({\r\n\t\t// \t\tisProcessing: false\r\n\t\t// \t});\r\n\t\t// });\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\r\n\t\t\t<Fragment>\r\n\r\n\t\t\t\t{(this.state.isLoading === false && this.state.isProcessing === false) &&\r\n\t\t\t\t\t<Fragment>\r\n\r\n\t\t\t\t\t\t<div className='ticket-photo-picker-header-container'>\r\n\t\t\t\t\t\t\t<div className='ticket-photo-picker-header'>\r\n\t\t\t\t\t\t\t\tVER 15 DPI: {window.devicePixelRatio} {this.state.info}\r\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t{/* {this.state.image !== null && */}\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<TicketPhotoPreview\r\n\t\t\t\t\t\t\t\t\timage={this.state.image}\r\n\t\t\t\t\t\t\t\t\tpaintMode={this.state.isPaintModeEnabled}\r\n\t\t\t\t\t\t\t\t\tmodifiedImage={this.ticketPhotoPreviewGetModifiedImageCallback}\r\n\t\t\t\t\t\t\t\t\tsetInfo={this.infoCallback}>\r\n\t\t\t\t\t\t\t\t</TicketPhotoPreview>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\ticonKey={'arrow-left'}\r\n\t\t\t\t\t\t\t\t\tadditionalClass='fixed-button left-bottom-element'\r\n\t\t\t\t\t\t\t\t\tonClick={this.dismissButtonClickCallback}>\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</Fragment>\r\n\r\n\t\t\t\t\t\t{/* <div className={this.state.image !== null ? 'hidden' : ''}>\r\n\t\t\t\t\t\t\t<WebcamImage\r\n\t\t\t\t\t\t\t\tref={this.webcamImageReference}>\r\n\t\t\t\t\t\t\t</WebcamImage>\r\n\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\ticonKey={'times'}\r\n\t\t\t\t\t\t\t\tadditionalClass='fixed-button left-bottom-element'\r\n\t\t\t\t\t\t\t\tonClick={this.cancelButtonClickCallback}>\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\ticonKey={'camera'}\r\n\t\t\t\t\t\t\t\tadditionalClass='fixed-button center-bottom-element'\r\n\t\t\t\t\t\t\t\tonClick={this.captureButtonClickCallback}>\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</div> */}\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t}\r\n\r\n\t\t\t</Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n","import React from 'react';\nimport TicketPhotoPicker from './components/TicketPhotoPicker/TicketPhotoPicker.js';\nimport './App.css';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faCamera, faTimes, faArrowLeft } from '@fortawesome/free-solid-svg-icons';\nlibrary.add( faCamera, faTimes, faArrowLeft);\n\n\nfunction App() {\n  return (\n    \n    <div className='App'>\n      <TicketPhotoPicker>\n      </TicketPhotoPicker>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}